!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.cep=r()}(this,function(){"use strict";function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.message,t=e.type,o=e.errors;this.name="CepPromiseError",this.message=r,this.type=t,this.errors=o}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.message,t=e.service;this.name="ServiceError",this.message=r,this.service=t}function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=r+"http://www.cepaberto.com/api/v2/ceps.json?cep="+e,i={method:"GET",mode:"cors",headers:{"content-type":"application/json;charset=utf-8",Authorization:"Token token="+F}};return _(t,i).then(o).then(n).then(s).catch(a)}function o(e){if(e.ok)return e.json();throw Error("Erro ao se conectar com o serviço Cep Aberto.")}function n(e){if(!Object.keys(e).length)throw new Error("CEP não encontrado na base do Cep Aberto.");return e}function s(e){return{cep:e.cep,state:e.estado,city:e.cidade,neighborhood:e.bairro,street:e.logradouro}}function a(e){var t=new r({message:e.message,service:"cepaberto"});throw"FetchError"===e.name&&(t.message="Erro ao se conectar com o serviço Cep Aberto."),t}function i(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=r+"https://apps.correios.com.br/SigepMasterJPA/AtendeClienteService/AtendeCliente",o={method:"POST",body:'<?xml version="1.0"?>\n<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cli="http://cliente.bean.master.sigep.bsb.correios.com.br/">\n  <soapenv:Header />\n  <soapenv:Body>\n    <cli:consultaCEP>\n      <cep>'+e+"</cep>\n    </cli:consultaCEP>\n  </soapenv:Body>\n</soapenv:Envelope>",headers:{"Content-Type":"text/xml;charset=UTF-8","cache-control":"no-cache"}};return _(t,o).then(c).catch(d)}function c(e){return e.ok?e.text().then(u).then(f):e.text().then(p).then(h)}function u(e){try{var r=e.replace(/\r?\n|\r/g,"").match(/<return>(.*)<\/return>/)[0]||"",t=r.replace("<return>","").replace("</return>",""),o=t.split(/</).reduce(function(e,r){var t=r.split(">");return t.length>1&&t[1].length&&(e[t[0]]=t[1]),e},{});return o}catch(e){throw new Error("Não foi possível interpretar o XML de resposta.")}}function p(e){try{var r=e.match(/<faultstring>(.*)<\/faultstring>/)[0]||"",t=r.replace("<faultstring>","").replace("</faultstring>","");return t}catch(e){throw new Error("Não foi possível interpretar o XML de resposta.")}}function h(e){throw new Error(e)}function f(e){return{cep:e.cep,state:e.uf,city:e.cidade,neighborhood:e.bairro,street:e.end}}function d(e){var t=new r({message:e.message,service:"correios"});throw"FetchError"===e.name&&(t.message="Erro ao se conectar com o serviço dos Correios."),t}function l(e){var r="https://viacep.com.br/ws/"+e+"/json/",t={method:"GET",mode:"cors",headers:{"content-type":"application/json;charset=utf-8"}};return _(r,t).then(m).then(v).then(g).catch(y)}function m(e){if(e.ok)return e.json();throw Error("Erro ao se conectar com o serviço ViaCEP.")}function v(e){if(e.erro===!0)throw new Error("CEP não encontrado na base do ViaCEP.");return e}function g(e){return{cep:e.cep.replace("-",""),state:e.uf,city:e.localidade,neighborhood:e.bairro,street:e.logradouro}}function y(e){var t=new r({message:e.message,service:"viacep"});throw"FetchError"===e.name&&(t.message="Erro ao se conectar com o serviço ViaCEP."),t}function w(e){return function(r){return e(r,z)}}function b(e){return Promise.resolve(e).then(E).then(P).then(x).then(C).then(S).catch(A).catch(T)}function E(r){var t="undefined"==typeof r?"undefined":O(r);if("number"===t||"string"===t)return r;throw new e({message:"Erro ao inicializar a instância do CepPromise.",type:"validation_error",errors:[{message:"Você deve chamar o construtor utilizando uma String ou um Number.",service:"cep_validation"}]})}function P(e){return e.toString().replace(/\D+/g,"")}function C(e){return"0".repeat(q-e.length)+e}function x(r){if(r.length<=q)return r;throw new e({message:"CEP deve conter exatamente "+q+" caracteres.",type:"validation_error",errors:[{message:"CEP informado possui mais do que "+q+" caracteres.",service:"cep_validation"}]})}function S(e){return Promise.any([H(e),M(e),N(e)])}function A(r){if(void 0!==r.length)throw new e({message:"Todos os serviços de CEP retornaram erro.",type:"service_error",errors:r});throw r}function T(r){var t=r.message,o=r.type,n=r.errors;throw new e({message:t,type:o,errors:n})}e.prototype=new Error;var j="function"==typeof fetch?fetch.bind():function(e,r){return r=r||{},new Promise(function(t,o){function n(){var e,r=[],t=[],o={};return s.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(n,s,a){r.push(s=s.toLowerCase()),t.push([s,a]),e=o[s],o[s]=e?e+","+a:a}),{ok:1==(s.status/200|0),status:s.status,statusText:s.statusText,url:s.responseURL,clone:n,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},headers:{keys:function(){return r},entries:function(){return t},get:function(e){return o[e.toLowerCase()]},has:function(e){return e.toLowerCase()in o}}}}var s=new XMLHttpRequest;s.open(r.method||"get",e);for(var a in r.headers)s.setRequestHeader(a,r.headers[a]);s.withCredentials="include"==r.credentials,s.onload=function(){t(n())},s.onerror=o,s.send(r.body)})},k=Object.freeze({default:j}),L=k&&j||k,_=window.fetch||(window.fetch=L.default||L);r.prototype=new Error;var z="https://proxier.now.sh/",F="37d718d2984e6452584a76d3d59d3a26",H="undefined"==typeof process?w(t):t,M="undefined"==typeof process?w(i):i,N=l,O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)},V=function(e){return new Promise(function(r,t){return Promise.resolve(e).then(t,r)})};Promise.any=function(e){return V(Promise.all([].concat(R(e)).map(V)))};var q=8;return b});