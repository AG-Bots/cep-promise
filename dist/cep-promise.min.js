!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("isomorphic-unfetch"),require("os")):"function"==typeof define&&define.amd?define(["isomorphic-unfetch","os"],r):e.cep=r(e.fetch,e.os)}(this,function(e,r){"use strict";function t(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t+"http://www.cepaberto.com/api/v2/ceps.json?cep="+r,s={method:"GET",mode:"cors",headers:{"content-type":"application/json;charset=utf-8",Authorization:"Token token="+G}};return e(a,s).then(o).then(n).then(c).catch(i)}function o(e){if(e.ok)return e.json();throw Error("Erro ao se conectar com o serviço Cep Aberto.")}function n(e){if(!Object.keys(e).length)throw new Error("CEP não encontrado na base do Cep Aberto.");return e}function c(e){return{cep:e.cep,state:e.estado,city:e.cidade,neighborhood:e.bairro,street:e.logradouro}}function i(e){var r=new N({message:e.message,service:"cepaberto"});throw"FetchError"===e.name&&(r.message="Erro ao se conectar com o serviço Cep Aberto."),r}function a(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=t+"https://apps.correios.com.br/SigepMasterJPA/AtendeClienteService/AtendeCliente",n={method:"POST",body:'<?xml version="1.0"?>\n<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cli="http://cliente.bean.master.sigep.bsb.correios.com.br/">\n  <soapenv:Header />\n  <soapenv:Body>\n    <cli:consultaCEP>\n      <cep>'+r+"</cep>\n    </cli:consultaCEP>\n  </soapenv:Body>\n</soapenv:Envelope>",headers:{"Content-Type":"text/xml;charset=UTF-8","cache-control":"no-cache"}};return e(o,n).then(s).catch(l)}function s(e){return e.ok?e.text().then(u).then(h):e.text().then(p).then(f)}function u(e){try{var r=e.replace(/\r?\n|\r/g,"").match(/<return>(.*)<\/return>/)[0]||"",t=r.replace("<return>","").replace("</return>",""),o=t.split(/</).reduce(function(e,r){var t=r.split(">");return t.length>1&&t[1].length&&(e[t[0]]=t[1]),e},{});return o}catch(e){throw new Error("Não foi possível interpretar o XML de resposta.")}}function p(e){try{var r=e.match(/<faultstring>(.*)<\/faultstring>/)[0]||"",t=r.replace("<faultstring>","").replace("</faultstring>","");return t}catch(e){throw new Error("Não foi possível interpretar o XML de resposta.")}}function f(e){throw new Error(e)}function h(e){return{cep:e.cep,state:e.uf,city:e.cidade,neighborhood:e.bairro,street:e.end}}function l(e){var r=new N({message:e.message,service:"correios"});throw"FetchError"===e.name&&(r.message="Erro ao se conectar com o serviço dos Correios."),r}function m(r){var t="https://viacep.com.br/ws/"+r+"/json/",o={method:"GET",mode:"cors",headers:{"content-type":"application/json;charset=utf-8"}};return e(t,o).then(d).then(v).then(y).catch(g)}function d(e){if(e.ok)return e.json();throw Error("Erro ao se conectar com o serviço ViaCEP.")}function v(e){if(e.erro===!0)throw new Error("CEP não encontrado na base do ViaCEP.");return e}function y(e){return{cep:e.cep.replace("-",""),state:e.uf,city:e.localidade,neighborhood:e.bairro,street:e.logradouro}}function g(e){var r=new N({message:e.message,service:"viacep"});throw"FetchError"===e.name&&(r.message="Erro ao se conectar com o serviço ViaCEP."),r}function b(){return"undefined"!=typeof window}function w(){return"undefined"!=typeof location&&"https:"===location.protocol}function E(){return b()&&!w()}function P(e){return function(r){return e(r,B)}}function C(e){return Promise.resolve(e).then(_).then(j).then(O).then(x).then(S).catch(A).catch(T)}function _(e){var r="undefined"==typeof e?"undefined":k(e);if("number"===r||"string"===r)return e;throw new M({message:"Erro ao inicializar a instância do CepPromise.",type:"validation_error",errors:[{message:"Você deve chamar o construtor utilizando uma String ou um Number.",service:"cep_validation"}]})}function j(e){return e.toString().replace(/\D+/g,"")}function x(e){return"0".repeat(J-e.length)+e}function O(e){if(e.length<=J)return e;throw new M({message:"CEP deve conter exatamente "+J+" caracteres.",type:"validation_error",errors:[{message:"CEP informado possui mais do que "+J+" caracteres.",service:"cep_validation"}]})}function S(e){return Promise.any([L(e),X(e),D(e)])}function A(e){if(void 0!==e.length)throw new M({message:"Todos os serviços de CEP retornaram erro.",type:"service_error",errors:e});throw e}function T(e){var r=e.message,t=e.type,o=e.errors;throw new M({message:r,type:t,errors:o})}e=e&&e.hasOwnProperty("default")?e.default:e;var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},V=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},q=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},z=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)},M=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,o=e.type,n=e.errors;F(this,r);var c=q(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return c.name="CepPromiseError",c.message=t,c.type=o,c.errors=n,c}return V(r,e),r}(Error),N=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,o=e.service;F(this,r);var n=q(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return n.name="ServiceError",n.message=t,n.service=o,n}return V(r,e),r}(Error),B="https://proxier.now.sh/",G="37d718d2984e6452584a76d3d59d3a26",L=E()?P(t):t,X=E()?P(a):a,D=m,H=function(e){return new Promise(function(r,t){return Promise.resolve(e).then(t,r)})};Promise.any=function(e){return H(Promise.all([].concat(z(e)).map(H)))};var J=8;return C});